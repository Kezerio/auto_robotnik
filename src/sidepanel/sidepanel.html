<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auto Robotnik</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <header class="header">
    <h1 class="header__title">Auto Robotnik</h1>
    <div class="header__mode">
      <label class="toggle">
        <input type="checkbox" id="modeToggle">
        <span class="toggle__slider"></span>
        <span class="toggle__label" id="modeLabel">Assist</span>
      </label>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab active" data-tab="ticket">–¢–∏–∫–µ—Ç</button>
    <button class="tab" data-tab="playbook">–°—Ü–µ–Ω–∞—Ä–∏–∏</button>
    <button class="tab" data-tab="recorder">–ó–∞–ø–∏—Å—å</button>
    <button class="tab" data-tab="knowledge">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</button>
    <button class="tab" data-tab="logs">–õ–æ–≥–∏</button>
  </nav>

  <!-- ===== –í–∫–ª–∞–¥–∫–∞: –¢–∏–∫–µ—Ç ===== -->
  <section class="panel" id="panel-ticket">
    <div class="card">
      <h2 class="card__title">–ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–∏–∫–µ—Ç–∞</h2>
      <div class="card__row">
        <span class="card__label">Ticket ID:</span>
        <span class="card__value" id="val-ticketId">‚Äî</span>
        <button class="btn-copy" data-copy="val-ticketId" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å">üìã</button>
      </div>
      <div class="card__row">
        <span class="card__label">–ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞:</span>
        <span class="card__value" id="val-clientCode">‚Äî</span>
        <button class="btn-copy" data-copy="val-clientCode" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å">üìã</button>
      </div>
      <div class="card__row">
        <span class="card__label">–ù–æ–º–µ—Ä –ª–∏–Ω–∏–∏:</span>
        <span class="card__value" id="val-lineNumber">‚Äî</span>
        <button class="btn-copy" data-copy="val-lineNumber" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å">üìã</button>
      </div>
      <div class="card__row">
        <span class="card__label">–¢–∞—Ä–∏—Ñ –ê–¢–°:</span>
        <span class="card__value" id="val-atcPlan">‚Äî</span>
      </div>
      <div class="card__row">
        <span class="card__label">–£—Å–ª—É–≥–∏:</span>
        <div class="card__value card__value--list" id="val-services">‚Äî</div>
      </div>
      <div class="card__actions">
        <button class="btn btn--primary" id="btn-refreshData">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        <button class="btn" id="btn-confirmCorrect">–í–µ—Ä–Ω–æ</button>
        <button class="btn btn--warn" id="btn-confirmWrong">–ù–µ–≤–µ—Ä–Ω–æ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å)</button>
      </div>
    </div>

    <div class="card" id="correction-panel" style="display:none">
      <h3 class="card__title">–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</h3>
      <label class="field">
        <span>–ö–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞:</span>
        <input type="text" id="fix-clientCode">
      </label>
      <label class="field">
        <span>–ù–æ–º–µ—Ä –ª–∏–Ω–∏–∏:</span>
        <input type="text" id="fix-lineNumber">
      </label>
      <label class="field">
        <span>–¢–∞—Ä–∏—Ñ –ê–¢–°:</span>
        <select id="fix-atcPlan">
          <option value="">–ù–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω</option>
          <option value="Start">Start</option>
          <option value="Business">Business</option>
        </select>
      </label>
      <button class="btn btn--primary" id="btn-applyFix">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
    </div>

    <div class="card">
      <h3 class="card__title">–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏</h3>
      <div class="quick-links" id="quickLinks">
        <!-- –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
    </div>
  </section>

  <!-- ===== –í–∫–ª–∞–¥–∫–∞: –°—Ü–µ–Ω–∞—Ä–∏–∏ ===== -->
  <section class="panel hidden" id="panel-playbook">
    <div class="card">
      <h2 class="card__title">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–π</h2>
      <div id="scenarioList" class="scenario-list"></div>
    </div>

    <div class="card hidden" id="playbookRunner">
      <h3 class="card__title" id="playbookRunnerTitle">‚Äî</h3>
      <div id="playbookSteps" class="steps-list"></div>
      <div class="card__actions">
        <button class="btn btn--primary" id="btn-nextStep">–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥</button>
        <button class="btn btn--warn" id="btn-stopPlaybook">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
      </div>
    </div>
  </section>

  <!-- ===== –í–∫–ª–∞–¥–∫–∞: –ó–∞–ø–∏—Å—å ===== -->
  <section class="panel hidden" id="panel-recorder">
    <div class="card">
      <h2 class="card__title">–ó–∞–ø–∏—Å—å —Å—Ü–µ–Ω–∞—Ä–∏—è</h2>
      <p class="card__desc">–í–∫–ª—é—á–∏—Ç–µ –∑–∞–ø–∏—Å—å, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–ø–æ–º–Ω–∏—Ç –∫–∞–∂–¥—ã–π –∫–ª–∏–∫ –∏ –≤–≤–æ–¥.</p>
      <div class="card__actions">
        <button class="btn btn--primary" id="btn-startRecord">–ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å</button>
        <button class="btn btn--warn" id="btn-stopRecord" disabled>–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
      </div>
      <div id="recordedStepsList" class="steps-list"></div>
      <div class="card__actions" id="recordActions" style="display:none">
        <label class="field">
          <span>–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è:</span>
          <input type="text" id="recordName" placeholder="–ú–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π">
        </label>
        <button class="btn btn--primary" id="btn-saveRecording">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ Playbook</button>
      </div>
    </div>

    <div class="card">
      <h3 class="card__title">–ò–º–ø–æ—Ä—Ç / –≠–∫—Å–ø–æ—Ä—Ç</h3>
      <div class="card__actions">
        <button class="btn" id="btn-exportPlaybooks">–≠–∫—Å–ø–æ—Ä—Ç Playbooks (JSON)</button>
        <button class="btn" id="btn-importPlaybooks">–ò–º–ø–æ—Ä—Ç Playbooks (JSON)</button>
        <input type="file" id="file-importPlaybooks" accept=".json" style="display:none">
      </div>
      <div class="card__actions">
        <button class="btn" id="btn-exportTraining">–≠–∫—Å–ø–æ—Ä—Ç –æ–±—É—á–∞—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤</button>
        <button class="btn" id="btn-importTraining">–ò–º–ø–æ—Ä—Ç –æ–±—É—á–∞—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤</button>
        <input type="file" id="file-importTraining" accept=".json" style="display:none">
      </div>
    </div>
  </section>

  <!-- ===== –í–∫–ª–∞–¥–∫–∞: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π ===== -->
  <section class="panel hidden" id="panel-knowledge">
    <div class="card">
      <h2 class="card__title">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</h2>
      <div class="field">
        <input type="text" id="kb-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π...">
      </div>
      <div id="kb-list" class="kb-list"></div>
    </div>
    <div class="card">
      <h3 class="card__title">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</h3>
      <label class="field">
        <span>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</span>
        <input type="text" id="kb-title">
      </label>
      <label class="field">
        <span>–¢–µ–∫—Å—Ç:</span>
        <textarea id="kb-text" rows="5"></textarea>
      </label>
      <label class="field">
        <span>–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</span>
        <input type="text" id="kb-tags" placeholder="–∞—Ç—Å, teleo, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è">
      </label>
      <button class="btn btn--primary" id="btn-addKb">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
    <div class="card">
      <h3 class="card__title">–ò–º–ø–æ—Ä—Ç / –≠–∫—Å–ø–æ—Ä—Ç</h3>
      <div class="card__actions">
        <button class="btn" id="btn-exportKb">–≠–∫—Å–ø–æ—Ä—Ç (JSON)</button>
        <button class="btn" id="btn-importKb">–ò–º–ø–æ—Ä—Ç (JSON)</button>
        <input type="file" id="file-importKb" accept=".json" style="display:none">
      </div>
    </div>
  </section>

  <!-- ===== –í–∫–ª–∞–¥–∫–∞: –õ–æ–≥–∏ ===== -->
  <section class="panel hidden" id="panel-logs">
    <div class="card">
      <h2 class="card__title">–ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π</h2>
      <div class="card__actions">
        <button class="btn" id="btn-refreshLogs">–û–±–Ω–æ–≤–∏—Ç—å</button>
        <button class="btn" id="btn-exportLogs">–≠–∫—Å–ø–æ—Ä—Ç</button>
        <button class="btn btn--warn" id="btn-clearLogs">–û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
      <div id="logsList" class="logs-list"></div>
    </div>
  </section>

  <div class="toast hidden" id="toast"></div>

  <script src="sidepanel.js" type="module"></script>
</body>
</html>
